-- 회원 테이블 (users)
CREATE TABLE users (
    id        NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    user_id   VARCHAR2(30) UNIQUE not null, -- id
    user_pass VARCHAR2(30) not null, -- 비밀번호
    name      VARCHAR2(30) not null, -- 이름
    jumin     VARCHAR2(30) not null,  -- 주민번호
);


-- 지출 유형 테이블 (extype)
CREATE TABLE extype (
    id   NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    type VARCHAR2(20) not null -- 유형
);


-- 수입 유형 테이블 (imtype)
CREATE TABLE imtype (
    id   NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    type VARCHAR2(20) not null -- 유형
);


-- 고정 지출 테이블 (fexport)
CREATE TABLE fexport (
    id      NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    user_id NUMBER
        REFERENCES users ( id ) not null, -- 참조할 아이디
    price   NUMBER not null, -- 금액
    day     VARCHAR(50) not null, -- 작성한 날짜
    type_id NUMBER
        REFERENCES extype ( id ) not null, -- 참조할 타입 아이디
    memo    VARCHAR2(100) -- 유형의 부가설명
);


-- 고정 수입 테이블 (fimport)
CREATE TABLE fimport (
    id      NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    user_id NUMBER
        REFERENCES users ( id ) not null, -- 참조할 아이디
    price   NUMBER, -- 금액
    day     VARCHAR(50), -- 작성한 날짜
    type_id NUMBER
        REFERENCES imtype ( id ) not null, -- 참조할 타입 아이디
    memo    VARCHAR2(100) -- 유형의 부가설명
);


-- 지출 테이블 (export)
CREATE TABLE export (
    id      NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    user_id NUMBER
        REFERENCES users ( id ) not null, -- 참조할 아이디
    price   NUMBER not null, -- 금액
    day     VARCHAR(50) not null, -- 작성한 날짜
    type_id NUMBER
        REFERENCES extype ( id ) not null, -- 참조할 타입 아이디
    memo    VARCHAR2(100) -- 유형의 부가설명
);


-- 수입 테이블 (import)
CREATE TABLE import (
    id      NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    user_id NUMBER
        REFERENCES users ( id ) not null, -- 참조할 아이디
    price   NUMBER, -- 금액
    day     VARCHAR(50), -- 작성한 날짜
    type_id NUMBER
        REFERENCES imtype ( id ) not null, -- 참조할 타입 아이디
    memo    VARCHAR2(100) -- 유형의 부가설명
);


-- 저축 테이블 (saveprice)
CREATE TABLE saveprice (
    id      NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    user_id NUMBER
        REFERENCES users ( id ) not null, -- 참조할 아이디
    price   NUMBER not null, -- 금액
    day     VARCHAR(50) not null, -- 작성한 날짜
    type_id NUMBER
        REFERENCES extype ( id ) not null, -- 참조할 타입 아이디
    memo    VARCHAR2(100) -- 유형의 부가설명
);


-- 잔고 테이블 (amount)
CREATE TABLE amount (
    id      NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    user_id NUMBER
        REFERENCES users ( id )
    NOT NULL, -- 참조할 아이디
    price   NUMBER NOT NULL, -- 금액
    day     VARCHAR(50) NOT NULL, -- 작성한 날짜
    type    VARCHAR(20) CHECK ( type IN ( '지출', '고정지출', '수입', '고정수입' ) ), -- 타입 나누기
    content VARCHAR(20) NOT NULL, -- 유형의 내용(버스비, 통신비, 월급)
    memo    VARCHAR2(100) -- 세부내용
);

==============================================
-- insert문

-- 회원 users
insert into users(user_id, user_pass, name, jumin) values( , , , );

-- 지출 extype
insert into extype(type) values('교통비');
insert into extype(type) values('식비');
insert into extype(type) values('쇼핑');
insert into extype(type) values('여가');
insert into extype(type) values('고정지출');

-- 수입 imtype
insert into imtype(type) values('급여');
insert into imtype(type) values('이자');
insert into imtype(type) values('고정수입');

-- 고정 지출 fexport
insert into fexport(user_id, price, day, type_id, memo) values( , , , , );

-- 고정 수입 fimport
insert into fimport(user_id, price, day, type_id, memo) values( , , , , );

-- 지출 export
insert into export(user_id, price, day, type_id, memo) values( , , , , );

-- 수입 import
insert into import(user_id, price, day, type_id, memo) values( , , , , );

-- 저축 saveprice
insert into saveprice(user_id, price, day, type_id, memo) values( , , , , );

-- 잔고
insert into amount(fimport_id, fexport_id, import_id, export_id) values( , , , );