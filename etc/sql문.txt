-- 회원 테이블 (users)
CREATE TABLE users (
    id        NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    user_id   VARCHAR2(30) UNIQUE not null, -- id
    user_pass VARCHAR2(30) not null, -- 비밀번호
    name      VARCHAR2(30) not null, -- 이름
    jumin     VARCHAR2(30) not null  -- 주민번호
);


-- 지출 유형 테이블 (extype)
CREATE TABLE extype (
    id   NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    type VARCHAR2(20) not null -- 유형
);


-- 수입 유형 테이블 (imtype)
CREATE TABLE imtype (
    id   NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    type VARCHAR2(20) not null -- 유형
);


-- 고정 지출 테이블 (fexport)
CREATE TABLE fexport (
    id      NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    user_id NUMBER
        REFERENCES users ( id ) not null, -- 참조할 아이디
    price   NUMBER not null, -- 금액
    day     VARCHAR(50) not null, -- 작성한 날짜
    type_id NUMBER
        REFERENCES extype ( id ) not null, -- 참조할 타입 아이디
    memo    VARCHAR2(100) -- 유형의 부가설명
);


-- 고정 수입 테이블 (fimport)
CREATE TABLE fimport (
    id      NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    user_id NUMBER
        REFERENCES users ( id ) not null, -- 참조할 아이디
    price   NUMBER, -- 금액
    day     VARCHAR(50), -- 작성한 날짜
    type_id NUMBER
        REFERENCES imtype ( id ) not null, -- 참조할 타입 아이디
    memo    VARCHAR2(100) -- 유형의 부가설명
);


-- 지출 테이블 (export)
CREATE TABLE export (
    id      NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    user_id NUMBER
        REFERENCES users ( id ) not null, -- 참조할 아이디
    price   NUMBER not null, -- 금액
    day     VARCHAR(50) not null, -- 작성한 날짜
    type_id NUMBER
        REFERENCES extype ( id ) not null, -- 참조할 타입 아이디
    memo    VARCHAR2(100) -- 유형의 부가설명
);


-- 수입 테이블 (import)
CREATE TABLE import (
    id      NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    user_id NUMBER
        REFERENCES users ( id ) not null, -- 참조할 아이디
    price   NUMBER, -- 금액
    day     VARCHAR(50), -- 작성한 날짜
    type_id NUMBER
        REFERENCES imtype ( id ) not null, -- 참조할 타입 아이디
    memo    VARCHAR2(100) -- 유형의 부가설명
);


-- 저축 테이블 (saveprice)
CREATE TABLE saveprice (
    id      NUMBER
        GENERATED BY DEFAULT AS IDENTITY
    PRIMARY KEY,
    user_id NUMBER
        REFERENCES users ( id ) not null, -- 참조할 아이디
    price   NUMBER not null, -- 금액
    day     VARCHAR(50) not null, -- 작성한 날짜
    type_id NUMBER
        REFERENCES extype ( id ) not null, -- 참조할 타입 아이디
    memo    VARCHAR2(100) -- 유형의 부가설명
);


-- 잔고 테이블 (amount)
CREATE TABLE amount (
    fimport_id NUMBER
        REFERENCES fimport ( id ) not null, -- 참조할 고정수입의 아이디
    fexport_id NUMBER
        REFERENCES fexport ( id ) not null, -- 참조할 고정지출의 아이디
    import_id  NUMBER
        REFERENCES import ( id ) not null, -- 참조할 수입의 아이디
    export_id  NUMBER
        REFERENCES export ( id ) not null -- 참조할 지출의 아이디
);

==============================================
-- insert문

-- 회원 users
insert into users(user_id, user_pass, name, jumin) value( , , , );

-- 지출 extype
insert into extype(type) value('교통비');
insert into extype(type) value('식비');
insert into extype(type) value('쇼핑');
insert into extype(type) value('여가');

-- 수입 imtype
insert into imtype(type) value('급여');
insert into imtype(type) value('이자');

-- 고정 지출 fexport
insert into fextype(user_id, price, day, type_id, memo) value( , , , , );

-- 고정 수입 fimport
insert into fimport(user_id, price, day, type_id, memo) value( , , , , );

-- 지출 export
insert into export(user_id, price, day, type_id, memo) value( , , , , );

-- 수입 import
insert into import(user_id, price, day, type_id, memo) value( , , , , );

-- 저축 saveprice
insert into saveprice(user_id, price, day, type_id, memo) value( , , , , );

-- 잔고
insert into amount(fimport_id, fexport_id, import_id, export_id) value( , , , );